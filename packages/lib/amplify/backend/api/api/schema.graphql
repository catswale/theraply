type Therapist
  @model {
  id: ID!
  firstName: String!
  lastName: String
  email: AWSEmail!
  phoneNumber: AWSPhone
  availability: [Availability]
  specializations: [String]
  titles: [String]
  greeting: String
  bio: String
  active: Boolean
  gender: String
  authenticatedUserIDs: [String]
  clients: [TherapistClientRelationship]
    @connection(keyName: "byTherapist", fields: ["id"])
}

type Availability {
  id: ID!
  start: AWSDateTime!
  end: AWSDateTime!
}

type TherapistClientRelationship
  @model(queries: null)
  @auth(rules: [
    { allow: owner, ownerField: "clientID" }
    { allow: owner, ownerField: "therapistID" }
  ])
  @key(name: "byTherapist", fields: ["therapistID", "clientID"])
  @key(name: "byClient", fields: ["clientID", "therapistID"]) {
  id: ID!
  therapistID: ID!
  clientID: ID!
  therapist: Therapist! @connection(fields: ["therapistID"])
  client: Client! @connection(fields: ["clientID"])
}

type Client @model 
  @auth(rules: [
    { allow: owner }, 
    { allow: owner, ownerField: "therapistIDs", operations: [read] }
  ]) {
  id: ID!
  firstName: String!
  lastName: String
  email: AWSEmail!
  phoneNumber: AWSPhone
  dob: AWSDate
  symptoms: [Symptoms]
  therapistPreferences: [TherapistPreferences]
  therapists: [TherapistClientRelationship]
    @connection(keyName: "byClient", fields: ["id"])
  therapistIDs: [String]
  stripeCustomerID: String
  payments: [Payment]
}

type TherapistPreferences {
    id: ID
  """Array of preferences eg. [Female]"""
  content: [String] 
  createdAt: AWSDateTime
}

type Symptoms {
  id: ID
  """Array of symptom strings eg. [Depression, Anxiety]"""
  content: [String] 
  createdAt: AWSDateTime
}

type Payment {
    id: ID
    plan: String
    start: AWSDateTime
    end: AWSDateTime
    createdAt: AWSDateTime
}

"""Created by therapists about their clients"""
type Note @model 
  @auth(rules: [{ allow: owner }]) {
  id: ID!
  title: String
  content: String
  clientID: String
}

type Message
  @model
  @auth(rules: [
    { allow: owner, ownerField: "clientID" }
    { allow: owner, ownerField: "therapistID" }
  ])
  @key(
    name: "byChannelID"
    fields: ["channelID", "createdAt"]
    queryField: "messagesByChannelID"
  ) {
  id: ID!
  channelID: ID!
  authorID: String!
  body: String!
  therapistID: String!
  clientID: String!
  participants: [String]
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Booking 
  @model 
  @auth(rules: [
    { allow: owner, ownerField: "participants" }
  ]){
  id: ID!
  bookingID: ID!
  start: AWSDateTime!
  end: AWSDateTime!
  state: String!
  participants: [String]!
}
